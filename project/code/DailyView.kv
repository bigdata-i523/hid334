#:kivy 1.10.0
#: import webbrowser webbrowser

<NewsLabel@Label>:
    color: [0,0,0,1]

<ForecastBoxLayout@BoxLayout>:
    orientation: 'vertical'
    size_hint_y: 1

<NewsLabelTitle@Label>:
    text_size: self.size
    shorten: True
    shorten_from: 'right'
    halign: 'left'
    font_size: 13
    bold: True
    underline: True
    markup: True
    valign: 'bottom'
    color: [0.133, 0, 0.8, 1]

<NewsLabelStory@Label>:
    size_hint_y: None
    text_size: self.width, None
    height: self.texture_size[1]
    font_size: 11
    padding_x: 1.1
    valign: 'top'
    color: [0.106, 0.106, 0.118, .9]

<WeatherForecastDay@Label>:
    text_size: self.size
    valign: 'top'
    halign: 'center'
    bold: True
    color: [0.663, 0.737, 0.816, 1]

<WeatherForecastHiLo@Label>:
    font_size: 12
    color: [0.663, 0.737, 0.816, 0.8]

<WeatherForecastImage@Image>:
    size_hint_y: None
    height: "50dp"

<LocalNews@Label>:
    color: [0.576, 0.051, 0.192,1]
    font_size: 12
    size_hint_y: None
    text_size: self.width, None
    height: self.texture_size[1]
    valign: 'top'

<Scores@Label>:
    color: [0, 0.125, 0.38, 1]
    font_size: 12
    size_hint_y: None
    text_size: self.width, None
    height: self.texture_size[1]

<NewsHeader@Label>:
    font_size: 18 
    bold: True
    text_size: self.size
    color: [0, 0.125, 0.38, 1]
    
<WeatherWidget>:
    zip_code_input: _zip_code_input

    canvas.before:
        Color:
            rgba: [1, 1, 1, 1]
        Rectangle:
            pos: self.pos
            size: self.size
    cols: 1
    BoxLayout:
        size_hint_y: None
        BoxLayout:
            size_hint_y: None
            orientation: "vertical"
            Image: 
                source: root.curr_image
                # source: root.get_weather_image()
                keep_ratio: False
                halign: 'center'
                size_hint_y: None
                height: "60dp"
            Label:
                id: current_temp
                text: root.current_temp
                # text: root.current_temp_label
                bold: True
                font_size: 25
                color: [0.216, 0.247, 0.318, 1]
            Label:
                id: hi_lo
                text: root.hi_lo
                size_hint: (1,0.5)
                font_size: 15
                color: [0.216, 0.247, 0.318, .75]
        
        ForecastBoxLayout:
            WeatherForecastDay: 
                id: forecast_day_1
                # text: root.forecast_day(1)
                text: root.forecast_day_1
            WeatherForecastImage:
                id: forecast_img_1 
                source: root.forecast_img_1
            WeatherForecastHiLo: 
                id: forecast_des_1
                text: root.forecast_des_1
            WeatherForecastHiLo: 
                id: forecast_hi_lo_1
                text: root.forecast_hi_lo_1
        
        ForecastBoxLayout:
            WeatherForecastDay: 
                id: forecast_day_2
                # text: root.forecast_day(1)
                text: root.forecast_day_2
            WeatherForecastImage:
                id: forecast_img_2 
                source: root.forecast_img_2
            WeatherForecastHiLo: 
                id: forecast_des_2
                text: root.forecast_des_2
            WeatherForecastHiLo: 
                id: forecast_hi_lo_2
                text: root.forecast_hi_lo_2

        ForecastBoxLayout:
            WeatherForecastDay: 
                id: forecast_day_3
                # text: root.forecast_day(1)
                text: root.forecast_day_3
            WeatherForecastImage:
                id: forecast_img_3
                source: root.forecast_img_3
            WeatherForecastHiLo: 
                id: forecast_des_3
                text: root.forecast_des_3
            WeatherForecastHiLo: 
                id: forecast_hi_lo_3
                text: root.forecast_hi_lo_3

        ForecastBoxLayout:
            WeatherForecastDay: 
                id: forecast_day_4
                # text: root.forecast_day(1)
                text: root.forecast_day_4
            WeatherForecastImage:
                id: forecast_img_4
                source: root.forecast_img_4
            WeatherForecastHiLo: 
                id: forecast_des_4
                text: root.forecast_des_4
            WeatherForecastHiLo: 
                id: forecast_hi_lo_4
                text: root.forecast_hi_lo_4

        ForecastBoxLayout:
            WeatherForecastDay: 
                id: forecast_day_5
                # text: root.forecast_day(1)
                text: root.forecast_day_5
            WeatherForecastImage:
                id: forecast_img_5
                source: root.forecast_img_5
            WeatherForecastHiLo: 
                id: forecast_des_5
                text: root.forecast_des_5
            WeatherForecastHiLo: 
                id: forecast_hi_lo_5
                text: root.forecast_hi_lo_5

        BoxLayout:
            size_hint_y: None
            BoxLayout:
                orientation: 'vertical'
                Label:
                    text: root.TimeHours + ':' + root.TimeMinutes
                    size_hint_x: 1
                    font_size: 35
                    size: self.size
                    bold: True
                    color: [0.345, 0.643, 0.69 ,1]
                Label:
                    text: root.current_date()
                    size_hint_x: 1
                    font_size: 15
                    bold: True
                    color: [0.345, 0.643, 0.69,1]
                Label:
                    text: root.sunrise()
                    font_size: 10
                    color: [0.345, 0.643, 0.69, .9]
                    text_size: self.size
                    valign: 'bottom'
                    halign: 'center'
                Label:
                    text: root.sunset()
                    font_size: 10
                    color: [0.345, 0.643, 0.69, .9]
                    text_size: self.size
                    valign: 'top'
                    halign: 'center'
    BoxLayout:
        orientation: 'horizontal'
        size_hint: (1, 0.15)
        BoxLayout:
            size_hint: (0.15, 1)
            orientation: 'vertical'

            Label: 
                id: location_label
                text: root.location_label
                color: [0.549, 0.612, 0.678 ,1]
                bold: True
            
            BoxLayout:
                orientation: 'horizontal'
                size_hint: (1, 0.55)
                TextInput: 
                    id: _zip_code_input
                    hint_text: 'New Zip or City/State Here'
                    height: self.minimum_height
                    italic: True
                    font_size: 10
                    on_double_tap: _zip_code_input.text =''
                Button: 
                    text: 'Refresh Location'
                    font_size: 10
                    on_press: root.location_update()
        Label: 
            text: root.quote_of_the_day()
            color: [0.549, 0.612, 0.678 ,1]
            italic: True
            font_size: 13
    BoxLayout:
        orientation: 'horizontal'
        BoxLayout:
            orientation: 'vertical'
            size_hint: (1,1)
            BoxLayout:
                orientation: 'vertical' 
                NewsHeader: 
                    text: "World News"
                NewsLabelTitle: 
                    text: '[ref=' + root.top_world(0,'title') + ']' + root.top_world(0,'title') + '[/ref]' 
                    on_ref_press: 
                        webbrowser.open(root.top_world(0,'link'))
                NewsLabelStory: 
                    text: root.top_world(0,'des')
                NewsLabelTitle: 
                    text: '[ref=' + root.top_world(0,'title') + ']' + root.top_world(1,'title') + '[/ref]' 
                    on_ref_press: 
                        webbrowser.open(root.top_world(1,'link'))
                NewsLabelStory: 
                    text: root.top_world(1,'des')
                NewsLabelTitle: 
                    text: '[ref=' + root.top_world(2,'title') + ']' + root.top_world(2,'title') + '[/ref]' 
                    on_ref_press: 
                        webbrowser.open(root.top_world(2,'link'))
                NewsLabelStory: 
                    text: root.top_world(2,'des')
                NewsLabelTitle: 
                    text: '[ref=' + root.top_world(3,'title') + ']' + root.top_world(3,'title') + '[/ref]' 
                    on_ref_press: 
                        webbrowser.open(root.top_world(3,'link'))
                NewsLabelStory: 
                    text: root.top_world(3,'des')
                NewsLabelTitle: 
                    text: '[ref=' + root.top_world(4,'title') + ']' + root.top_world(4,'title') + '[/ref]' 
                    on_ref_press: 
                        webbrowser.open(root.top_world(4,'link'))
                NewsLabelStory: 
                    text: root.top_world(4,'des')
        BoxLayout:
            orientation: 'vertical'
            NewsHeader: 
                text: "Business News"
            NewsLabelTitle: 
                text: '[ref=' + root.top_business_title(0) + ']' + root.top_business_title(0) + '[/ref]' 
                on_ref_press: 
                    webbrowser.open(root.top_business(0,'link'))
            NewsLabelStory: 
                text: root.top_business(0,'des')
            NewsLabelTitle: 
                text: '[ref=' + root.top_business_title(1) + ']' + root.top_business_title(1) + '[/ref]' 
                on_ref_press: 
                    webbrowser.open(root.top_business(1,'link'))
            NewsLabelStory: 
                text: root.top_business(1,'des')
            NewsLabelTitle: 
                text: '[ref=' + root.top_business_title(2) + ']' + root.top_business_title(2) + '[/ref]' 
                on_ref_press: 
                    webbrowser.open(root.top_business(2,'link'))
            NewsLabelStory: 
                text: root.top_business(2,'des')
            NewsLabelTitle: 
                text: '[ref=' + root.top_business_title(3) + ']' + root.top_business_title(3) + '[/ref]' 
                on_ref_press: 
                    webbrowser.open(root.top_business(3,'link'))
            NewsLabelStory: 
                text: root.top_business(3,'des')
            NewsLabelTitle: 
                text: '[ref=' + root.top_business_title(4) + ']' + root.top_business_title(4) + '[/ref]' 
                on_ref_press: 
                    webbrowser.open(root.top_business(4,'link'))
            NewsLabelStory: 
                text: root.top_business(4,'des')             
    BoxLayout:
        orientation: 'horizontal'
        size_hint: (1, .4)
        BoxLayout:
            orientation: 'vertical'
            LocalNews:
                id: local_news_0
                text: root.local_news_0
            LocalNews:
                id: local_news_1
                text: root.local_news_1
            LocalNews:
                id: local_news_2
                text: root.local_news_2
            LocalNews:
                id: local_news_3
                text: root.local_news_3
            LocalNews:
                id: local_news_4
                text: root.local_news_4
            LocalNews:
                id: local_news_5
                text: root.local_news_5
        BoxLayout:
            orientation: 'vertical'
            Scores:
                text: root.nba_scores() + '\n'
            Scores: 
                text: root.nfl_scores()
